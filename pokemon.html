<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Random Pokemon Stats</title>
</head>

<body>
    <div id="pokemon1" style="float: left; margin: 10px;"></div>
    <H1 style="float: left;">VS</H1>
    <div id="pokemon2" style="float: left; margin: 10px;"></div>
    <div id="ganador" align="center">Y EL GANADOR ES...</div>

    <script>
        // Generar dos números aleatorios para obtener dos Pokemon al azar
        const id1 = Math.floor(Math.random() * 898) + 1; // El rango de ids de Pokemon es de 1 a 898
        let id2 = id1;
        while (id2 === id1) {
            id2 = Math.floor(Math.random() * 898) + 1;
        }

        // Hacer una solicitud para obtener datos del primer Pokemon
        fetch(`https://pokeapi.co/api/v2/pokemon/${id1}/`)
            .then((response) => response.json())
            .then((data1) => {
                const nombre1 = data1.name.toUpperCase();
                const ataque1 = data1.stats.find((stat) => stat.stat.name === 'attack').base_stat;
                const defensa1 = data1.stats.find((stat) => stat.stat.name === 'defense').base_stat;
                const hp1 = data1.stats.find((stat) => stat.stat.name === 'hp').base_stat;
                const imagen1 = data1.sprites.front_default;
                const vida1 = (defensa1 * hp1) / 2;

                // Hacer una solicitud para obtener datos del segundo Pokemon
                fetch(`https://pokeapi.co/api/v2/pokemon/${id2}/`)
                    .then((response) => response.json())
                    .then((data2) => {
                        const nombre2 = data2.name.toUpperCase();
                        const ataque2 = data2.stats.find((stat) => stat.stat.name === 'attack').base_stat;
                        const defensa2 = data2.stats.find((stat) => stat.stat.name === 'defense').base_stat;
                        const hp2 = data2.stats.find((stat) => stat.stat.name === 'hp').base_stat;
                        const imagen2 = data2.sprites.front_default;
                        const vida2 = defensa2 * hp2;

                        // Mostrar los datos de los dos Pokemon en la página
                        const divPokemon1 = document.getElementById('pokemon1');
                        divPokemon1.innerHTML = `
                <h4>${nombre1}</h4>
                <img src="${imagen1}" alt="Imagen de ${nombre1}">
                <p>Ataque: ${ataque1}</p>
                <p>Defensa: ${defensa1}</p>
                <p>HP: ${hp1}</p>
            `;
                        const divPokemon2 = document.getElementById('pokemon2');
                        divPokemon2.innerHTML = `
                <h4>${nombre2}</h4>
                <img src="${imagen2}" alt="Imagen de ${nombre2}">
                <p>Ataque: ${ataque2}</p>
                <p>Defensa: ${defensa2}</p>
                <p>HP: ${hp2}</p>
            `;
                        setTimeout(() => {
                            const ganador = document.getElementById('ganador');
                            const numAtaques1 = Math.ceil(vida2 / ataque1);
                            const numAtaques2 = Math.ceil(vida1 / ataque2);

                            if (numAtaques2 > numAtaques1) {
                                ganador.innerHTML = `
                    <h2>${nombre1}</h2>
                    <img src="${imagen1}" alt="Imagen de ${nombre1}">
                    <h5>Nº de ataques necesitados: ${numAtaques1}</h5>
                    <h5>Nº de ataques que necesitaba el rival: ${numAtaques2}</h5>`
                            } else if ((numAtaques2 < numAtaques1)) {
                                ganador.innerHTML = `
                    <h2>${nombre2}</h2>
                    <img src="${imagen2}" alt="Imagen de ${nombre2}">
                    <h5>Nº de ataques necesitados: ${numAtaques2}</h5>
                    <h5>Nº de ataques que necesitaba el rival: ${numAtaques1}</h5>`
                            }
                        }, 2000);

                    })



                    .catch((error) => console.log('Error al obtener datos del segundo Pokemon:', error));
            })
            .catch((error) => console.log('Error al obtener datos del primer Pokemon:', error));


    </script>
</body>

</html>